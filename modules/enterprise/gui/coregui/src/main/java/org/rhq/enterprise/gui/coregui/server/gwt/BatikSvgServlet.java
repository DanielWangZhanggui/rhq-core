/*
 * RHQ Management Platform
 * Copyright (C) 2005-2012 Red Hat, Inc.
 * All rights reserved.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation version 2 of the License.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */
package org.rhq.enterprise.gui.coregui.server.gwt;

import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.batik.dom.svg.SAXSVGDocumentFactory;
import org.apache.batik.transcoder.Transcoder;
import org.apache.batik.transcoder.TranscoderException;
import org.apache.batik.transcoder.TranscoderInput;
import org.apache.batik.transcoder.TranscoderOutput;
import org.apache.batik.transcoder.image.ImageTranscoder;
import org.apache.batik.transcoder.image.JPEGTranscoder;
import org.apache.batik.transcoder.image.PNGTranscoder;
import org.apache.batik.util.XMLResourceDescriptor;
import org.rhq.enterprise.gui.coregui.client.util.Log;
import org.w3c.dom.Document;


/**
 * BatikSvgServlet that takes SVG XML input as a POST and returns a rasterized image
 * (either jpg or png) of the SVG sent to it.
 * This is useful for gracefully degrading to browsers that dont support SVG such as IE8.
 */
public class BatikSvgServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;
    private static final float IMAGE_QUALITY = 0.8f; // 0 - 99 only used for JPEG images

    public BatikSvgServlet() {
        super();
    }

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        long startTime = System.currentTimeMillis();

        String svg = request.getParameter("svg");

        // Some tester svg strings
        //String svg = "<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" style=\"height:150px;width:100%;\"><g class=\"nvd3 nv-wrap nv-multiBarWithLegend\"><g transform=\"translate(60,30)\"><g class=\"nv-x nv-axis\" transform=\"translate(0,70)\"><g class=\"nvd3 nv-wrap nv-axis\"><g><g style=\"opacity: 1;\" transform=\"translate(6.653078202995008,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">05 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(18.749584026622294,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">05 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(30.846089850249584,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 1;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 1;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">05 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(42.942595673876866,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">06 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(55.039101497504156,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">06 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(67.13560732113145,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">06 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(79.23211314475873,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">06 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(91.32861896838602,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">06 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(103.4251247920133,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">06 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(115.52163061564059,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">06 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(127.61813643926789,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">07 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(139.7146422628952,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 1;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 1;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">07 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(151.81114808652248,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">07 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(163.90765391014978,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">07 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(176.00415973377707,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">07 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(188.10066555740434,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">07 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(200.19717138103164,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">07 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(212.29367720465893,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">07 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(224.3901830282862,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">08 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(236.4866888519135,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">08 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(248.5831946755408,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 1;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 1;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">08 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(260.67970049916806,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">08 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(272.77620632279536,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">08 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(284.8727121464226,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">08 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(296.9692179700499,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">08 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(309.0657237936772,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">09 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(321.1622296173045,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">09 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(333.2587354409318,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">09 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(345.3552412645591,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">09 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(357.4517470881863,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 1;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 1;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">09 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(369.5482529118136,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">09 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(381.6447587354409,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">09 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(393.7412645590682,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">09 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(405.8377703826955,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">10 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(417.9342762063228,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">10 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(430.0307820299501,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">10 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(442.12728785357734,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">10 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(454.22379367720464,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">10 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(466.32029950083194,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 1;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 1;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">10 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(478.41680532445923,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">10 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(490.51331114808653,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">11 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(502.6098169717138,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">11 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(514.7063227953411,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">11 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(526.8028286189684,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">11 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(538.8993344425958,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">11 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(550.995840266223,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">11 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(563.0923460898503,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">11 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(575.1888519134776,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 1;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 1;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">11 AM</text></g><g style=\"opacity: 1;\" transform=\"translate(587.2853577371048,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">12 PM</text></g><g style=\"opacity: 1;\" transform=\"translate(599.3818635607322,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">12 PM</text></g><g style=\"opacity: 1;\" transform=\"translate(611.4783693843594,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">12 PM</text></g><g style=\"opacity: 1;\" transform=\"translate(623.5748752079868,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">12 PM</text></g><g style=\"opacity: 1;\" transform=\"translate(635.671381031614,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">12 PM</text></g><g style=\"opacity: 1;\" transform=\"translate(647.7678868552413,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">12 PM</text></g><g style=\"opacity: 1;\" transform=\"translate(659.8643926788686,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">12 PM</text></g><g style=\"opacity: 1;\" transform=\"translate(671.9608985024959,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">01 PM</text></g><g style=\"opacity: 1;\" transform=\"translate(684.0574043261232,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 1;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 1;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">01 PM</text></g><g style=\"opacity: 1;\" transform=\"translate(696.1539101497505,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">01 PM</text></g><g style=\"opacity: 1;\" transform=\"translate(708.2504159733777,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">01 PM</text></g><g style=\"opacity: 1;\" transform=\"translate(720.346921797005,0)\"><line class=\"tick\" y2=\"-70\" style=\"opacity: 0;\" x2=\"0\"/><text y=\"3\" style=\"opacity: 0;\" text-anchor=\"middle\" dy=\".71em\" x=\"0\">01 PM</text></g><path class=\"domain\" d=\"M0,0V0H727V0\"/><text class=\"nv-axislabel\" text-anchor=\"middle\" y=\"30\" x=\"363.5\" style=\"opacity: 1;\">Time</text></g></g></g><g class=\"nv-y nv-axis\"><g class=\"nvd3 nv-wrap nv-axis\"><g><g style=\"opacity: 1;\" transform=\"translate(0,70)\"><line class=\"tick zero\" x2=\"727\" y2=\"0\"/></g><g style=\"opacity: 1;\" transform=\"translate(0,16.153846153846153)\"><line class=\"tick\" x2=\"727\" y2=\"0\"/><text x=\"-3\" text-anchor=\"end\" dy=\".32em\" y=\"0\">10.00</text></g><path class=\"domain\" d=\"M0,0H0V70H0\"/><text class=\"nv-axislabel\" text-anchor=\"middle\" transform=\"rotate(-90)\" y=\"-48\" x=\"-35\">NONE</text></g><g class=\"nv-axisMaxMin\" transform=\"translate(0,70)\"><text style=\"opacity: 1;\" dy=\".32em\" y=\"0\" x=\"-3\" text-anchor=\"end\">0.00</text></g><g class=\"nv-axisMaxMin\" transform=\"translate(0,0)\"><text style=\"opacity: 1;\" dy=\".32em\" y=\"0\" x=\"-3\" text-anchor=\"end\">13.00</text></g></g></g><g class=\"nv-barsWrap\"><g class=\"nvd3 nv-wrap nv-multibar\" transform=\"translate(0,0)\"><defs><clipPath id=\"nv-edge-clip-7363\"><rect width=\"727\" height=\"70\"/></clipPath></defs><g clip-path=\"url(#nv-edge-clip-8644)\"><g class=\"nv-groups\"><g style=\"stroke-opacity: 1; fill-opacity: 0.75; fill: rgb(255, 127, 14); stroke: rgb(255, 127, 14);\" class=\"nv-group nv-series-0\"><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(1.2096505823627288,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(13.306156405990016,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(25.402662229617306,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(37.49916805324459,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(49.59567387687188,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(61.69217970049917,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"43.07692307692308\" height=\"26.92307692307692\" width=\"10.88685524126456\" transform=\"translate(73.78868552412645,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(85.88519134775375,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(97.98169717138103,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"43.07692307692308\" height=\"26.92307692307692\" width=\"10.88685524126456\" transform=\"translate(110.07820299500831,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(122.17470881863561,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"43.07692307692308\" height=\"26.92307692307692\" width=\"10.88685524126456\" transform=\"translate(134.27121464226292,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(146.3677204658902,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(158.46422628951748,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"43.07692307692308\" height=\"26.92307692307692\" width=\"10.88685524126456\" transform=\"translate(170.56073211314478,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(182.65723793677205,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"32.3076923076923\" height=\"37.6923076923077\" width=\"10.88685524126456\" transform=\"translate(194.75374376039935,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(206.85024958402664,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(218.9467554076539,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"43.07692307692308\" height=\"26.92307692307692\" width=\"10.88685524126456\" transform=\"translate(231.0432612312812,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(243.1397670549085,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"10.76923076923076\" height=\"59.23076923076924\" width=\"10.88685524126456\" transform=\"translate(255.23627287853577,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(267.33277870216307,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(279.4292845257903,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(291.5257903494176,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(303.6222961730449,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"37.69230769230769\" height=\"32.30769230769231\" width=\"10.88685524126456\" transform=\"translate(315.7188019966722,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(327.8153078202995,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(339.9118136439268,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"26.92307692307692\" height=\"43.07692307692308\" width=\"10.88685524126456\" transform=\"translate(352.00831946755403,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(364.1048252911813,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"43.07692307692308\" height=\"26.92307692307692\" width=\"10.88685524126456\" transform=\"translate(376.2013311148086,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(388.2978369384359,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(400.3943427620632,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"43.07692307692308\" height=\"26.92307692307692\" width=\"10.88685524126456\" transform=\"translate(412.4908485856905,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(424.5873544093178,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"43.07692307692308\" height=\"26.92307692307692\" width=\"10.88685524126456\" transform=\"translate(436.68386023294505,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(448.78036605657235,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(460.87687188019964,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"43.07692307692308\" height=\"26.92307692307692\" width=\"10.88685524126456\" transform=\"translate(472.97337770382694,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(485.06988352745424,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"43.07692307692308\" height=\"26.92307692307692\" width=\"10.88685524126456\" transform=\"translate(497.16638935108153,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(509.2628951747088,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(521.3594009983361,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"43.07692307692308\" height=\"26.92307692307692\" width=\"10.88685524126456\" transform=\"translate(533.4559068219635,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(545.5524126455907,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"43.07692307692308\" height=\"26.92307692307692\" width=\"10.88685524126456\" transform=\"translate(557.648918469218,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(569.7454242928453,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(581.8419301164726,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"32.3076923076923\" height=\"37.6923076923077\" width=\"10.88685524126456\" transform=\"translate(593.9384359400999,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(606.0349417637271,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"5.384615384615387\" height=\"64.61538461538461\" width=\"10.88685524126456\" transform=\"translate(618.1314475873545,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(630.2279534109817,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(642.324459234609,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"70\" width=\"10.88685524126456\" transform=\"translate(654.4209650582363,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(666.5174708818636,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"70\" width=\"10.88685524126456\" transform=\"translate(678.6139767054909,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(690.7104825291182,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"0\" width=\"10.88685524126456\" transform=\"translate(702.8069883527454,0)\"/><rect class=\"nv-bar positive\" x=\"0\" y=\"0\" height=\"70\" width=\"10.88685524126456\" transform=\"translate(714.9034941763728,0)\"/></g></g></g></g></g><g class=\"nv-legendWrap\" transform=\"translate(363.5,-30)\"><g class=\"nvd3 nv-legend\"><g transform=\"translate(-192.375,5)\"><g class=\"nv-series\" transform=\"translate(0,5)\"><circle style=\"fill: rgb(255, 127, 14); stroke: rgb(255, 127, 14); stroke-width: 2;\" r=\"5\"/><text text-anchor=\"start\" dy=\".32em\" dx=\"8\">jboss.web:name=%schema%%dash%%address%-%port%,type=ThreadPool:currentThreadCount</text></g></g></g></g><g class=\"nv-controlsWrap\"/></g></g></svg>";
        //String svg = "<svg  xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"540\" height=\"240\"><path d=\"M0,186.3406423028045Q46.79260780287475,179.65533364704044,53.992607802874744,178.47180082333222C64.79260780287474,176.6965015877699,97.2,169.897517460457,108,168.5876499471811S151.19260780287476,166.42083629098371,161.99260780287474,165.37312569057303S205.2,159.91540702932306,216,158.11054394307428S259.19260780287476,149.30809574824437,269.9926078028748,147.32449482808516S313.20000000000005,139.19914954415574,324.00000000000006,138.27453474148234S367.19260780287476,138.4451933577144,377.9926078028748,138.07834680135124S421.2,135.53102229996833,432,134.6060691778507S475.19260780287476,129.76391538159004,485.9926078028748,128.82881558017505Q493.19260780287476,128.20541571256504,540,125.25507116370082\" fill=\"none\" stroke=\"#cb513a\" stroke-width=\"2\" class=\"undefined\"></path><path d=\"M0,178.00199314335387Q46.79260780287475,170.63637960752052,53.992607802874744,169.4325130453779C64.79260780287474,167.62671320216398,97.2,161.21420479676152,108,159.94399471121454S151.19260780287476,157.9473378964267,161.99260780287474,156.73041218990804S205.2,150.15517213183045,216,147.774737646028S259.19260780287476,135.43823979997575,269.9926078028748,132.9260673318836S313.20000000000005,124.15616584096394,324.00000000000006,122.65301296510637S367.19260780287476,118.53694496869785,377.9926078028748,117.89453857330787S421.2,117.37544038467473,432,116.22894901120657S475.19260780287476,107.93523327891101,485.9926078028748,106.42962483862621Q493.19260780287476,105.42588587843635,540,101.17286460835857\" fill=\"none\" stroke=\"#73c03a\" stroke-width=\"2\" class=\"undefined\"></path><path d=\"M0,179.03751200536195Q46.79260780287475,172.45797778642515,53.992607802874744,171.28692053543767C64.79260780287474,169.53033465895646,97.2,163.24313160292832,108,161.47165324054976S151.19260780287476,155.50942644262793,161.99260780287474,153.57213691165202S205.2,144.85908200688257,216,142.09875793079067S259.19260780287476,129.20445781979618,269.9926078028748,125.96889615073289S313.20000000000005,113.97457139614349,324.00000000000006,109.74314124015785S367.19260780287476,88.35301634788594,377.9926078028748,83.65459459087654S421.2,67.91657517936389,432,62.75892367006381S475.19260780287476,38.116348102505846,485.9926078028748,32.078079497875706Q493.19260780287476,28.052567094788945,540,2.3762376237623926\" fill=\"none\" stroke=\"#65b9ac\" stroke-width=\"2\" class=\"undefined\"></path><path d=\"M0,225.3095806283439Q46.79260780287475,221.6123693206402,53.992607802874744,220.88750279834363C64.79260780287474,219.80020301489878,97.2,215.50800355111375,108,214.43658279389533S151.19260780287476,211.80497111614858,161.99260780287474,210.17329522615955S205.2,200.95622794405105,216,198.11982389400512S259.19260780287476,184.8406946458631,269.9926078028748,181.80925472570036S313.20000000000005,170.94164925929115,324.00000000000006,167.80542469237758S367.19260780287476,154.17700457631085,377.9926078028748,150.4470090565647S421.2,134.6593606095223,432,130.505469494916S475.19260780287476,112.88236006898283,485.9926078028748,108.9080979105018Q493.19260780287476,106.25858980484777,540,90.76284791010559\" fill=\"none\" stroke=\"#4682b4\" stroke-width=\"2\" class=\"undefined\"></path><g class=\"y_grid\"><g style=\"opacity: 1; \" transform=\"translate(0,240)\"><line class=\"tick\" x2=\"540\" y2=\"0\"></line><text x=\"-3\" y=\"0\" dy=\".32em\" text-anchor=\"end\"></text></g><g style=\"opacity: 1; \" transform=\"translate(0,136.28465842086558)\"><line class=\"tick\" x2=\"540\" y2=\"0\"></line><text x=\"-3\" y=\"0\" dy=\".32em\" text-anchor=\"end\">50M</text></g><g style=\"opacity: 1; \" transform=\"translate(0,32.56931684173114)\"><line class=\"tick\" x2=\"540\" y2=\"0\"></line><text x=\"-3\" y=\"0\" dy=\".32em\" text-anchor=\"end\">100M</text></g><path class=\"domain\" d=\"M540,0H0V240H540\"></path></g></svg>";
        //String svg = "<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" class=\"box\" width=\"120\" height=\"500\"><g transform=\"translate(50,10)\"><line class=\"center\" x1=\"10\" y1=\"335.56000982213345\" x2=\"10\" y2=\"6.451275697447841\" style=\"opacity: 1; \"></line><rect class=\"box\" x=\"0\" y=\"94.58896517293653\" width=\"20\" height=\"134.22128127603102\"></rect><line class=\"median\" x1=\"0\" y1=\"140.90214882893702\" x2=\"20\" y2=\"140.90214882893702\"></line><line class=\"whisker\" x1=\"0\" y1=\"335.56000982213345\" x2=\"20\" y2=\"335.56000982213345\" style=\"opacity: 1; \"></line><line class=\"whisker\" x1=\"0\" y1=\"6.451275697447841\" x2=\"20\" y2=\"6.451275697447841\" style=\"opacity: 1; \"></line><circle class=\"outlier\" r=\"5\" cx=\"10\" cy=\"441.7432993993495\" style=\"opacity: 1; \"></circle><text class=\"box\" dy=\".3em\" dx=\"-6\" x=\"0\" y=\"228.81024644896755\" text-anchor=\"end\">851</text><text class=\"box\" dy=\".3em\" dx=\"6\" x=\"20\" y=\"140.90214882893702\" text-anchor=\"start\">935</text><text class=\"box\" dy=\".3em\" dx=\"-6\" x=\"0\" y=\"94.58896517293653\" text-anchor=\"end\">979</text><text class=\"whisker\" dy=\".3em\" dx=\"6\" x=\"20\" y=\"335.56000982213345\" style=\"opacity: 1; \">749</text><text class=\"whisker\" dy=\".3em\" dx=\"6\" x=\"20\" y=\"6.451275697447841\" style=\"opacity: 1; \">1,064</text></g></svg>";
        //String svg = "<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"960\" height=\"499.5\"><g style=\"fill: #aaaadd; \" class=\"layer\"><g class=\"bar\" transform=\"translate(0,0)\"><rect width=\"13.5\" x=\"0\" y=\"446.01763244433886\" height=\"33.48236755566114\"></rect></g><g class=\"bar\" transform=\"translate(15,0)\"><rect width=\"13.5\" x=\"0\" y=\"438.688538513285\" height=\"40.81146148671502\"></rect></g><g class=\"bar\" transform=\"translate(30,0)\"><rect width=\"13.5\" x=\"0\" y=\"434.89267679226424\" height=\"44.60732320773576\"></rect></g><g class=\"bar\" transform=\"translate(45,0)\"><rect width=\"13.5\" x=\"0\" y=\"427.84074256949157\" height=\"51.65925743050843\"></rect></g><g class=\"bar\" transform=\"translate(60,0)\"><rect width=\"13.5\" x=\"0\" y=\"424.5429500795955\" height=\"54.95704992040447\"></rect></g><g class=\"bar\" transform=\"translate(75,0)\"><rect width=\"13.5\" x=\"0\" y=\"422.29192309049034\" height=\"57.20807690950966\"></rect></g><g class=\"bar\" transform=\"translate(90,0)\"><rect width=\"13.5\" x=\"0\" y=\"420.0211571799716\" height=\"59.478842820028376\"></rect></g><g class=\"bar\" transform=\"translate(105,0)\"><rect width=\"13.5\" x=\"0\" y=\"424.80430258238596\" height=\"54.69569741761404\"></rect></g><g class=\"bar\" transform=\"translate(120,0)\"><rect width=\"13.5\" x=\"0\" y=\"427.3563726851429\" height=\"52.1436273148571\"></rect></g><g class=\"bar\" transform=\"translate(135,0)\"><rect width=\"13.5\" x=\"0\" y=\"435.31202310503875\" height=\"44.18797689496125\"></rect></g><g class=\"bar\" transform=\"translate(150,0)\"><rect width=\"13.5\" x=\"0\" y=\"440.61684222914766\" height=\"38.883157770852335\"></rect></g><g class=\"bar\" transform=\"translate(165,0)\"><rect width=\"13.5\" x=\"0\" y=\"449.65468291621295\" height=\"29.84531708378705\"></rect></g><g class=\"bar\" transform=\"translate(180,0)\"><rect width=\"13.5\" x=\"0\" y=\"454.93494332745126\" height=\"24.565056672548735\"></rect></g><g class=\"bar\" transform=\"translate(195,0)\"><rect width=\"13.5\" x=\"0\" y=\"458.99719885788335\" height=\"20.502801142116652\"></rect></g><g class=\"bar\" transform=\"translate(210,0)\"><rect width=\"13.5\" x=\"0\" y=\"465.00040875863044\" height=\"14.499591241369558\"></rect></g><g class=\"bar\" transform=\"translate(225,0)\"><rect width=\"13.5\" x=\"0\" y=\"466.2793850700063\" height=\"13.220614929993701\"></rect></g><g class=\"bar\" transform=\"translate(240,0)\"><rect width=\"13.5\" x=\"0\" y=\"469.9000298468979\" height=\"9.599970153102106\"></rect></g><g class=\"bar\" transform=\"translate(255,0)\"><rect width=\"13.5\" x=\"0\" y=\"469.90883301287585\" height=\"9.591166987124154\"></rect></g><g class=\"bar\" transform=\"translate(270,0)\"><rect width=\"13.5\" x=\"0\" y=\"472.3656533546326\" height=\"7.134346645367373\"></rect></g><g class=\"bar\" transform=\"translate(285,0)\"><rect width=\"13.5\" x=\"0\" y=\"472.82181154077614\" height=\"6.678188459223861\"></rect></g><g class=\"bar\" transform=\"translate(300,0)\"><rect width=\"13.5\" x=\"0\" y=\"474.2093089550526\" height=\"5.29069104494738\"></rect></g><g class=\"bar\" transform=\"translate(315,0)\"><rect width=\"13.5\" x=\"0\" y=\"471.35091468845656\" height=\"8.149085311543445\"></rect></g><g class=\"bar\" transform=\"translate(330,0)\"><rect width=\"13.5\" x=\"0\" y=\"473.16617870092995\" height=\"6.333821299070053\"></rect></g><g class=\"bar\" transform=\"translate(345,0)\"><rect width=\"13.5\" x=\"0\" y=\"471.02469599639835\" height=\"8.47530400360165\"></rect></g><g class=\"bar\" transform=\"translate(360,0)\"><rect width=\"13.5\" x=\"0\" y=\"474.9877166407789\" height=\"4.512283359221101\"></rect></g><g class=\"bar\" transform=\"translate(375,0)\"><rect width=\"13.5\" x=\"0\" y=\"472.17380206139313\" height=\"7.326197938606867\"></rect></g><g class=\"bar\" transform=\"translate(390,0)\"><rect width=\"13.5\" x=\"0\" y=\"473.1056185819801\" height=\"6.394381418019918\"></rect></g><g class=\"bar\" transform=\"translate(405,0)\"><rect width=\"13.5\" x=\"0\" y=\"474.39492458288106\" height=\"5.10507541711894\"></rect></g><g class=\"bar\" transform=\"translate(420,0)\"><rect width=\"13.5\" x=\"0\" y=\"472.7517681823751\" height=\"6.748231817624912\"></rect></g><g class=\"bar\" transform=\"translate(435,0)\"><rect width=\"13.5\" x=\"0\" y=\"470.8174470792933\" height=\"8.682552920706712\"></rect></g><g class=\"bar\" transform=\"translate(450,0)\"><rect width=\"13.5\" x=\"0\" y=\"474.19048384581475\" height=\"5.309516154185246\"></rect></g><g class=\"bar\" transform=\"translate(465,0)\"><rect width=\"13.5\" x=\"0\" y=\"475.0176552730652\" height=\"4.482344726934798\"></rect></g><g class=\"bar\" transform=\"translate(480,0)\"><rect width=\"13.5\" x=\"0\" y=\"473.2536421517248\" height=\"6.246357848275181\"></rect></g><g class=\"bar\" transform=\"translate(495,0)\"><rect width=\"13.5\" x=\"0\" y=\"474.2635114511113\" height=\"5.236488548888701\"></rect></g><g class=\"bar\" transform=\"translate(510,0)\"><rect width=\"13.5\" x=\"0\" y=\"471.0827619216583\" height=\"8.417238078341711\"></rect></g><g class=\"bar\" transform=\"translate(525,0)\"><rect width=\"13.5\" x=\"0\" y=\"471.14961605158487\" height=\"8.350383948415129\"></rect></g><g class=\"bar\" transform=\"translate(540,0)\"><rect width=\"13.5\" x=\"0\" y=\"472.9259537847903\" height=\"6.574046215209705\"></rect></g><g class=\"bar\" transform=\"translate(555,0)\"><rect width=\"13.5\" x=\"0\" y=\"471.8651174819121\" height=\"7.63488251808792\"></rect></g><g class=\"bar\" transform=\"translate(570,0)\"><rect width=\"13.5\" x=\"0\" y=\"471.1184384068295\" height=\"8.381561593170488\"></rect></g><g class=\"bar\" transform=\"translate(585,0)\"><rect width=\"13.5\" x=\"0\" y=\"474.86331427375563\" height=\"4.636685726244366\"></rect></g><g class=\"bar\" transform=\"translate(600,0)\"><rect width=\"13.5\" x=\"0\" y=\"472.4551778032179\" height=\"7.044822196782093\"></rect></g><g class=\"bar\" transform=\"translate(615,0)\"><rect width=\"13.5\" x=\"0\" y=\"473.808174859855\" height=\"5.691825140144999\"></rect></g><g class=\"bar\" transform=\"translate(630,0)\"><rect width=\"13.5\" x=\"0\" y=\"474.6318224771985\" height=\"4.8681775228014885\"></rect></g><g class=\"bar\" transform=\"translate(645,0)\"><rect width=\"13.5\" x=\"0\" y=\"471.7759706217267\" height=\"7.724029378273315\"></rect></g><g class=\"bar\" transform=\"translate(660,0)\"><rect width=\"13.5\" x=\"0\" y=\"472.3203412635912\" height=\"7.179658736408783\"></rect></g><g class=\"bar\" transform=\"translate(675,0)\"><rect width=\"13.5\" x=\"0\" y=\"472.6949145331971\" height=\"6.805085466802893\"></rect></g><g class=\"bar\" transform=\"translate(690,0)\"><rect width=\"13.5\" x=\"0\" y=\"474.90331576473085\" height=\"4.5966842352691515\"></rect></g><g class=\"bar\" transform=\"translate(705,0)\"><rect width=\"13.5\" x=\"0\" y=\"472.5540139728898\" height=\"6.945986027110223\"></rect></g><g class=\"bar\" transform=\"translate(720,0)\"><rect width=\"13.5\" x=\"0\" y=\"472.7335039195822\" height=\"6.766496080417824\"></rect></g><g class=\"bar\" transform=\"translate(735,0)\"><rect width=\"13.5\" x=\"0\" y=\"473.0292575554823\" height=\"6.470742444517725\"></rect></g><g class=\"bar\" transform=\"translate(750,0)\"><rect width=\"13.5\" x=\"0\" y=\"472.0823780970287\" height=\"7.417621902971291\"></rect></g><g class=\"bar\" transform=\"translate(765,0)\"><rect width=\"13.5\" x=\"0\" y=\"473.23501673289076\" height=\"6.264983267109244\"></rect></g><g class=\"bar\" transform=\"translate(780,0)\"><rect width=\"13.5\" x=\"0\" y=\"472.53096542919377\" height=\"6.96903457080623\"></rect></g><g class=\"bar\" transform=\"translate(795,0)\"><rect width=\"13.5\" x=\"0\" y=\"472.438300058268\" height=\"7.061699941732002\"></rect></g><g class=\"bar\" transform=\"translate(810,0)\"><rect width=\"13.5\" x=\"0\" y=\"474.0403537328207\" height=\"5.459646267179323\"></rect></g><g class=\"bar\" transform=\"translate(825,0)\"><rect width=\"13.5\" x=\"0\" y=\"472.9070210534324\" height=\"6.592978946567598\"></rect></g><g class=\"bar\" transform=\"translate(840,0)\"><rect width=\"13.5\" x=\"0\" y=\"473.48331326634053\" height=\"6.016686733659469\"></rect></g><g class=\"bar\" transform=\"translate(855,0)\"><rect width=\"13.5\" x=\"0\" y=\"473.82049606058547\" height=\"5.679503939414531\"></rect></g><g class=\"bar\" transform=\"translate(870,0)\"><rect width=\"13.5\" x=\"0\" y=\"472.08691082197373\" height=\"7.413089178026269\"></rect></g><g class=\"bar\" transform=\"translate(885,0)\"><rect width=\"13.5\" x=\"0\" y=\"470.85560029205806\" height=\"8.644399707941943\"></rect></g><g class=\"bar\" transform=\"translate(900,0)\"><rect width=\"13.5\" x=\"0\" y=\"470.86437921995986\" height=\"8.635620780040142\"></rect></g><g class=\"bar\" transform=\"translate(915,0)\"><rect width=\"13.5\" x=\"0\" y=\"474.62898290697996\" height=\"4.871017093020043\"></rect></g><g class=\"bar\" transform=\"translate(930,0)\"><rect width=\"13.5\" x=\"0\" y=\"474.7456164955854\" height=\"4.754383504414591\"></rect></g><g class=\"bar\" transform=\"translate(945,0)\"><rect width=\"13.5\" x=\"0\" y=\"471.2841235774865\" height=\"8.215876422513475\"></rect></g></g><g style=\"fill: #8e8eb5; \" class=\"layer\"><g class=\"bar\" transform=\"translate(0,0)\"><rect width=\"13.5\" x=\"0\" y=\"416.86565270256676\" height=\"29.151979741772095\"></rect></g><g class=\"bar\" transform=\"translate(15,0)\"><rect width=\"13.5\" x=\"0\" y=\"415.3347916667023\" height=\"23.35374684658268\"></rect></g><g class=\"bar\" transform=\"translate(30,0)\"><rect width=\"13.5\" x=\"0\" y=\"415.46498816806127\" height=\"19.427688624202972\"></rect></g><g class=\"bar\" transform=\"translate(45,0)\"><rect width=\"13.5\" x=\"0\" y=\"397.56167811311593\" height=\"30.279064456375636\"></rect></g><g class=\"bar\" transform=\"translate(60,0)\"><rect width=\"13.5\" x=\"0\" y=\"344.70431886129415\" height=\"79.83863121830137\"></rect></g><g class=\"bar\" transform=\"translate(75,0)\"><rect width=\"13.5\" x=\"0\" y=\"233.97180792268176\" height=\"188.32011516780858\"></rect></g><g class=\"bar\" transform=\"translate(90,0)\"><rect width=\"13.5\" x=\"0\" y=\"90.30531948862449\" height=\"329.71583769134713\"></rect></g><g class=\"bar\" transform=\"translate(105,0)\"><rect width=\"13.5\" x=\"0\" y=\"34.91904449864819\" height=\"389.88525808373777\"></rect></g><g class=\"bar\" transform=\"translate(120,0)\"><rect width=\"13.5\" x=\"0\" y=\"116.69231977146143\" height=\"310.6640529136815\"></rect></g><g class=\"bar\" transform=\"translate(135,0)\"><rect width=\"13.5\" x=\"0\" y=\"250.5883291553056\" height=\"184.72369394973316\"></rect></g><g class=\"bar\" transform=\"translate(150,0)\"><rect width=\"13.5\" x=\"0\" y=\"323.88697768443836\" height=\"116.7298645447093\"></rect></g><g class=\"bar\" transform=\"translate(165,0)\"><rect width=\"13.5\" x=\"0\" y=\"328.6671839360044\" height=\"120.98749898020856\"></rect></g><g class=\"bar\" transform=\"translate(180,0)\"><rect width=\"13.5\" x=\"0\" y=\"323.78434625727675\" height=\"131.1505970701745\"></rect></g><g class=\"bar\" transform=\"translate(195,0)\"><rect width=\"13.5\" x=\"0\" y=\"360.61933553431436\" height=\"98.37786332356899\"></rect></g><g class=\"bar\" transform=\"translate(210,0)\"><rect width=\"13.5\" x=\"0\" y=\"415.7519527568439\" height=\"49.248456001786565\"></rect></g><g class=\"bar\" transform=\"translate(225,0)\"><rect width=\"13.5\" x=\"0\" y=\"444.62231298406255\" height=\"21.657072085943753\"></rect></g><g class=\"bar\" transform=\"translate(240,0)\"><rect width=\"13.5\" x=\"0\" y=\"461.70078252553134\" height=\"8.199247321366556\"></rect></g><g class=\"bar\" transform=\"translate(255,0)\"><rect width=\"13.5\" x=\"0\" y=\"462.74314105979664\" height=\"7.165691953079204\"></rect></g><g class=\"bar\" transform=\"translate(270,0)\"><rect width=\"13.5\" x=\"0\" y=\"465.1436380045773\" height=\"7.222015350055301\"></rect></g><g class=\"bar\" transform=\"translate(285,0)\"><rect width=\"13.5\" x=\"0\" y=\"464.1401376340266\" height=\"8.681673906749552\"></rect></g><g class=\"bar\" transform=\"translate(300,0)\"><rect width=\"13.5\" x=\"0\" y=\"467.32794713364297\" height=\"6.881361821409655\"></rect></g><g class=\"bar\" transform=\"translate(315,0)\"><rect width=\"13.5\" x=\"0\" y=\"463.3955852918918\" height=\"7.955329396564764\"></rect></g><g class=\"bar\" transform=\"translate(330,0)\"><rect width=\"13.5\" x=\"0\" y=\"462.0031550679929\" height=\"11.16302363293704\"></rect></g><g class=\"bar\" transform=\"translate(345,0)\"><rect width=\"13.5\" x=\"0\" y=\"372.38052088578286\" height=\"98.64417511061549\"></rect></g><g class=\"bar\" transform=\"translate(360,0)\"><rect width=\"13.5\" x=\"0\" y=\"321.42265736857524\" height=\"153.56505927220365\"></rect></g><g class=\"bar\" transform=\"translate(375,0)\"><rect width=\"13.5\" x=\"0\" y=\"446.8976102021428\" height=\"25.276191859250332\"></rect></g><g class=\"bar\" transform=\"translate(390,0)\"><rect width=\"13.5\" x=\"0\" y=\"464.6560841140385\" height=\"8.44953446794159\"></rect></g><g class=\"bar\" transform=\"translate(405,0)\"><rect width=\"13.5\" x=\"0\" y=\"466.28151809554845\" height=\"8.113406487332611\"></rect></g><g class=\"bar\" transform=\"translate(420,0)\"><rect width=\"13.5\" x=\"0\" y=\"465.4402338672693\" height=\"7.311534315105803\"></rect></g><g class=\"bar\" transform=\"translate(435,0)\"><rect width=\"13.5\" x=\"0\" y=\"465.01685416034144\" height=\"5.80059291895185\"></rect></g><g class=\"bar\" transform=\"translate(450,0)\"><rect width=\"13.5\" x=\"0\" y=\"467.9633909463641\" height=\"6.227092899450668\"></rect></g><g class=\"bar\" transform=\"translate(465,0)\"><rect width=\"13.5\" x=\"0\" y=\"466.6768449167892\" height=\"8.340810356275995\"></rect></g><g class=\"bar\" transform=\"translate(480,0)\"><rect width=\"13.5\" x=\"0\" y=\"464.6094136136635\" height=\"8.644228538061327\"></rect></g><g class=\"bar\" transform=\"translate(495,0)\"><rect width=\"13.5\" x=\"0\" y=\"468.6003904827554\" height=\"5.663120968355884\"></rect></g><g class=\"bar\" transform=\"translate(510,0)\"><rect width=\"13.5\" x=\"0\" y=\"464.29390663578897\" height=\"6.788855285869317\"></rect></g><g class=\"bar\" transform=\"translate(525,0)\"><rect width=\"13.5\" x=\"0\" y=\"465.29970135068777\" height=\"5.849914700897102\"></rect></g><g class=\"bar\" transform=\"translate(540,0)\"><rect width=\"13.5\" x=\"0\" y=\"466.42511064348946\" height=\"6.500843141300834\"></rect></g><g class=\"bar\" transform=\"translate(555,0)\"><rect width=\"13.5\" x=\"0\" y=\"464.38134856222666\" height=\"7.483768919685417\"></rect></g><g class=\"bar\" transform=\"translate(570,0)\"><rect width=\"13.5\" x=\"0\" y=\"463.0801956607849\" height=\"8.038242746044602\"></rect></g><g class=\"bar\" transform=\"translate(585,0)\"><rect width=\"13.5\" x=\"0\" y=\"468.9822738836321\" height=\"5.88104039012353\"></rect></g><g class=\"bar\" transform=\"translate(600,0)\"><rect width=\"13.5\" x=\"0\" y=\"466.00705659157904\" height=\"6.448121211638863\"></rect></g><g class=\"bar\" transform=\"translate(615,0)\"><rect width=\"13.5\" x=\"0\" y=\"466.3743532082814\" height=\"7.4338216515736235\"></rect></g><g class=\"bar\" transform=\"translate(630,0)\"><rect width=\"13.5\" x=\"0\" y=\"466.71325481267337\" height=\"7.918567664525142\"></rect></g><g class=\"bar\" transform=\"translate(645,0)\"><rect width=\"13.5\" x=\"0\" y=\"464.48961710735125\" height=\"7.286353514375435\"></rect></g><g class=\"bar\" transform=\"translate(660,0)\"><rect width=\"13.5\" x=\"0\" y=\"467.88613471933166\" height=\"4.434206544259553\"></rect></g><g class=\"bar\" transform=\"translate(675,0)\"><rect width=\"13.5\" x=\"0\" y=\"464.613646039312\" height=\"8.08126849388509\"></rect></g><g class=\"bar\" transform=\"translate(690,0)\"><rect width=\"13.5\" x=\"0\" y=\"469.45449257925685\" height=\"5.448823185473998\"></rect></g><g class=\"bar\" transform=\"translate(705,0)\"><rect width=\"13.5\" x=\"0\" y=\"467.93054067231833\" height=\"4.6234733005714475\"></rect></g><g class=\"bar\" transform=\"translate(720,0)\"><rect width=\"13.5\" x=\"0\" y=\"467.1043206249409\" height=\"5.62918329464128\"></rect></g><g class=\"bar\" transform=\"translate(735,0)\"><rect width=\"13.5\" x=\"0\" y=\"468.127181200433\" height=\"4.902076355049303\"></rect></g><g class=\"bar\" transform=\"translate(750,0)\"><rect width=\"13.5\" x=\"0\" y=\"464.415057701184\" height=\"7.667320395844683\"></rect></g><g class=\"bar\" transform=\"translate(765,0)\"><rect width=\"13.5\" x=\"0\" y=\"466.9569252038032\" height=\"6.278091529087533\"></rect></g><g class=\"bar\" transform=\"translate(780,0)\"><rect width=\"13.5\" x=\"0\" y=\"467.4255609771544\" height=\"5.105404452039352\"></rect></g><g class=\"bar\" transform=\"translate(795,0)\"><rect width=\"13.5\" x=\"0\" y=\"467.56457455057625\" height=\"4.873725507691745\"></rect></g><g class=\"bar\" transform=\"translate(810,0)\"><rect width=\"13.5\" x=\"0\" y=\"466.4671663615533\" height=\"7.573187371267352\"></rect></g><g class=\"bar\" transform=\"translate(825,0)\"><rect width=\"13.5\" x=\"0\" y=\"467.168704543807\" height=\"5.738316509625406\"></rect></g><g class=\"bar\" transform=\"translate(840,0)\"><rect width=\"13.5\" x=\"0\" y=\"466.48575287113584\" height=\"6.997560395204687\"></rect></g><g class=\"bar\" transform=\"translate(855,0)\"><rect width=\"13.5\" x=\"0\" y=\"465.1376228086798\" height=\"8.682873251905676\"></rect></g><g class=\"bar\" transform=\"translate(870,0)\"><rect width=\"13.5\" x=\"0\" y=\"467.2209315567083\" height=\"4.865979265265423\"></rect></g><g class=\"bar\" transform=\"translate(885,0)\"><rect width=\"13.5\" x=\"0\" y=\"465.90254437962324\" height=\"4.95305591243482\"></rect></g><g class=\"bar\" transform=\"translate(900,0)\"><rect width=\"13.5\" x=\"0\" y=\"462.5115704047336\" height=\"8.35280881522624\"></rect></g><g class=\"bar\" transform=\"translate(915,0)\"><rect width=\"13.5\" x=\"0\" y=\"467.0373620989718\" height=\"7.591620808008145\"></rect></g><g class=\"bar\" transform=\"translate(930,0)\"><rect width=\"13.5\" x=\"0\" y=\"468.23128711385726\" height=\"6.514329381728146\"></rect></g><g class=\"bar\" transform=\"translate(945,0)\"><rect width=\"13.5\" x=\"0\" y=\"465.04957984428864\" height=\"6.2345437331978815\"></rect></g></g><g style=\"fill: #71718e; \" class=\"layer\"><g class=\"bar\" transform=\"translate(0,0)\"><rect width=\"13.5\" x=\"0\" y=\"410.6903377085137\" height=\"6.175314994053053\"></rect></g><g class=\"bar\" transform=\"translate(15,0)\"><rect width=\"13.5\" x=\"0\" y=\"407.6733521611105\" height=\"7.661439505591829\"></rect></g><g class=\"bar\" transform=\"translate(30,0)\"><rect width=\"13.5\" x=\"0\" y=\"408.3315400265956\" height=\"7.133448141465692\"></rect></g><g class=\"bar\" transform=\"translate(45,0)\"><rect width=\"13.5\" x=\"0\" y=\"390.0262751481216\" height=\"7.535402964994319\"></rect></g><g class=\"bar\" transform=\"translate(60,0)\"><rect width=\"13.5\" x=\"0\" y=\"336.407354627435\" height=\"8.296964233859171\"></rect></g><g class=\"bar\" transform=\"translate(75,0)\"><rect width=\"13.5\" x=\"0\" y=\"228.9908164286732\" height=\"4.980991494008549\"></rect></g><g class=\"bar\" transform=\"translate(90,0)\"><rect width=\"13.5\" x=\"0\" y=\"82.20922614456708\" height=\"8.096093344057408\"></rect></g><g class=\"bar\" transform=\"translate(105,0)\"><rect width=\"13.5\" x=\"0\" y=\"29.076525826349155\" height=\"5.842518672299036\"></rect></g><g class=\"bar\" transform=\"translate(120,0)\"><rect width=\"13.5\" x=\"0\" y=\"107.39934912591707\" height=\"9.292970645544358\"></rect></g><g class=\"bar\" transform=\"translate(135,0)\"><rect width=\"13.5\" x=\"0\" y=\"241.48352446122635\" height=\"9.104804694079235\"></rect></g><g class=\"bar\" transform=\"translate(150,0)\"><rect width=\"13.5\" x=\"0\" y=\"308.9359644497858\" height=\"14.951013234652578\"></rect></g><g class=\"bar\" transform=\"translate(165,0)\"><rect width=\"13.5\" x=\"0\" y=\"302.901506726397\" height=\"25.765677209607418\"></rect></g><g class=\"bar\" transform=\"translate(180,0)\"><rect width=\"13.5\" x=\"0\" y=\"285.6610340767493\" height=\"38.12331218052748\"></rect></g><g class=\"bar\" transform=\"translate(195,0)\"><rect width=\"13.5\" x=\"0\" y=\"303.00450855581175\" height=\"57.614826978502606\"></rect></g><g class=\"bar\" transform=\"translate(210,0)\"><rect width=\"13.5\" x=\"0\" y=\"350.40816823424916\" height=\"65.34378452259472\"></rect></g><g class=\"bar\" transform=\"translate(225,0)\"><rect width=\"13.5\" x=\"0\" y=\"379.8338730705151\" height=\"64.78843991354745\"></rect></g><g class=\"bar\" transform=\"translate(240,0)\"><rect width=\"13.5\" x=\"0\" y=\"407.27023692546675\" height=\"54.43054560006459\"></rect></g><g class=\"bar\" transform=\"translate(255,0)\"><rect width=\"13.5\" x=\"0\" y=\"425.62574278134423\" height=\"37.11739827845241\"></rect></g><g class=\"bar\" transform=\"translate(270,0)\"><rect width=\"13.5\" x=\"0\" y=\"442.86017094182466\" height=\"22.283467062752663\"></rect></g><g class=\"bar\" transform=\"translate(285,0)\"><rect width=\"13.5\" x=\"0\" y=\"450.2612968606501\" height=\"13.87884077337651\"></rect></g><g class=\"bar\" transform=\"translate(300,0)\"><rect width=\"13.5\" x=\"0\" y=\"460.662424303998\" height=\"6.665522829644942\"></rect></g><g class=\"bar\" transform=\"translate(315,0)\"><rect width=\"13.5\" x=\"0\" y=\"455.23618086271347\" height=\"8.159404429178323\"></rect></g><g class=\"bar\" transform=\"translate(330,0)\"><rect width=\"13.5\" x=\"0\" y=\"457.381015559018\" height=\"4.622139508974897\"></rect></g><g class=\"bar\" transform=\"translate(345,0)\"><rect width=\"13.5\" x=\"0\" y=\"364.2323838014812\" height=\"8.148137084301652\"></rect></g><g class=\"bar\" transform=\"translate(360,0)\"><rect width=\"13.5\" x=\"0\" y=\"316.6279702038665\" height=\"4.794687164708762\"></rect></g><g class=\"bar\" transform=\"translate(375,0)\"><rect width=\"13.5\" x=\"0\" y=\"442.309676383726\" height=\"4.587933818416786\"></rect></g><g class=\"bar\" transform=\"translate(390,0)\"><rect width=\"13.5\" x=\"0\" y=\"459.1119032438576\" height=\"5.544180870180867\"></rect></g><g class=\"bar\" transform=\"translate(405,0)\"><rect width=\"13.5\" x=\"0\" y=\"456.800123073773\" height=\"9.481395021775427\"></rect></g><g class=\"bar\" transform=\"translate(420,0)\"><rect width=\"13.5\" x=\"0\" y=\"451.6621087247494\" height=\"13.778125142519912\"></rect></g><g class=\"bar\" transform=\"translate(435,0)\"><rect width=\"13.5\" x=\"0\" y=\"439.199462447209\" height=\"25.81739171313245\"></rect></g><g class=\"bar\" transform=\"translate(450,0)\"><rect width=\"13.5\" x=\"0\" y=\"431.08265608624026\" height=\"36.88073486012382\"></rect></g><g class=\"bar\" transform=\"translate(465,0)\"><rect width=\"13.5\" x=\"0\" y=\"418.6675734403944\" height=\"48.009271476394815\"></rect></g><g class=\"bar\" transform=\"translate(480,0)\"><rect width=\"13.5\" x=\"0\" y=\"418.2280547969726\" height=\"46.38135881669092\"></rect></g><g class=\"bar\" transform=\"translate(495,0)\"><rect width=\"13.5\" x=\"0\" y=\"428.4452147649441\" height=\"40.15517571781129\"></rect></g><g class=\"bar\" transform=\"translate(510,0)\"><rect width=\"13.5\" x=\"0\" y=\"435.92387440188844\" height=\"28.37003223390053\"></rect></g><g class=\"bar\" transform=\"translate(525,0)\"><rect width=\"13.5\" x=\"0\" y=\"443.39823439269554\" height=\"21.901466957992227\"></rect></g><g class=\"bar\" transform=\"translate(540,0)\"><rect width=\"13.5\" x=\"0\" y=\"442.22686616978376\" height=\"24.1982444737057\"></rect></g><g class=\"bar\" transform=\"translate(555,0)\"><rect width=\"13.5\" x=\"0\" y=\"437.3743453612411\" height=\"27.007003200985537\"></rect></g><g class=\"bar\" transform=\"translate(570,0)\"><rect width=\"13.5\" x=\"0\" y=\"430.1824294238753\" height=\"32.897766236909604\"></rect></g><g class=\"bar\" transform=\"translate(585,0)\"><rect width=\"13.5\" x=\"0\" y=\"428.2035877943199\" height=\"40.7786860893122\"></rect></g><g class=\"bar\" transform=\"translate(600,0)\"><rect width=\"13.5\" x=\"0\" y=\"422.5209894551305\" height=\"43.486067136448526\"></rect></g><g class=\"bar\" transform=\"translate(615,0)\"><rect width=\"13.5\" x=\"0\" y=\"417.60665127908396\" height=\"48.767701929197415\"></rect></g><g class=\"bar\" transform=\"translate(630,0)\"><rect width=\"13.5\" x=\"0\" y=\"415.20900256965206\" height=\"51.50425224302131\"></rect></g><g class=\"bar\" transform=\"translate(645,0)\"><rect width=\"13.5\" x=\"0\" y=\"412.9937285008131\" height=\"51.49588860653813\"></rect></g><g class=\"bar\" transform=\"translate(660,0)\"><rect width=\"13.5\" x=\"0\" y=\"422.1344530548015\" height=\"45.75168166453017\"></rect></g><g class=\"bar\" transform=\"translate(675,0)\"><rect width=\"13.5\" x=\"0\" y=\"425.11026233012916\" height=\"39.503383709182856\"></rect></g><g class=\"bar\" transform=\"translate(690,0)\"><rect width=\"13.5\" x=\"0\" y=\"434.47041806093625\" height=\"34.9840745183206\"></rect></g><g class=\"bar\" transform=\"translate(705,0)\"><rect width=\"13.5\" x=\"0\" y=\"440.42937500351076\" height=\"27.501165668807573\"></rect></g><g class=\"bar\" transform=\"translate(720,0)\"><rect width=\"13.5\" x=\"0\" y=\"446.36903900250206\" height=\"20.735281622438833\"></rect></g><g class=\"bar\" transform=\"translate(735,0)\"><rect width=\"13.5\" x=\"0\" y=\"451.8374987464945\" height=\"16.289682453938497\"></rect></g><g class=\"bar\" transform=\"translate(750,0)\"><rect width=\"13.5\" x=\"0\" y=\"453.50643940433673\" height=\"10.908618296847294\"></rect></g><g class=\"bar\" transform=\"translate(765,0)\"><rect width=\"13.5\" x=\"0\" y=\"457.5158768580742\" height=\"9.44104834572903\"></rect></g><g class=\"bar\" transform=\"translate(780,0)\"><rect width=\"13.5\" x=\"0\" y=\"459.6278046025398\" height=\"7.7977563746146075\"></rect></g><g class=\"bar\" transform=\"translate(795,0)\"><rect width=\"13.5\" x=\"0\" y=\"460.36765599716273\" height=\"7.196918553413525\"></rect></g><g class=\"bar\" transform=\"translate(810,0)\"><rect width=\"13.5\" x=\"0\" y=\"461.50053800838157\" height=\"4.966628353171757\"></rect></g><g class=\"bar\" transform=\"translate(825,0)\"><rect width=\"13.5\" x=\"0\" y=\"460.1506835039851\" height=\"7.018021039821917\"></rect></g><g class=\"bar\" transform=\"translate(840,0)\"><rect width=\"13.5\" x=\"0\" y=\"458.82174340772264\" height=\"7.664009463413208\"></rect></g><g class=\"bar\" transform=\"translate(855,0)\"><rect width=\"13.5\" x=\"0\" y=\"460.5314884931743\" height=\"4.6061343155054715\"></rect></g><g class=\"bar\" transform=\"translate(870,0)\"><rect width=\"13.5\" x=\"0\" y=\"461.69979718168827\" height=\"5.52113437502004\"></rect></g><g class=\"bar\" transform=\"translate(885,0)\"><rect width=\"13.5\" x=\"0\" y=\"460.1525257367059\" height=\"5.7500186429173255\"></rect></g><g class=\"bar\" transform=\"translate(900,0)\"><rect width=\"13.5\" x=\"0\" y=\"454.67578838709363\" height=\"7.8357820176399855\"></rect></g><g class=\"bar\" transform=\"translate(915,0)\"><rect width=\"13.5\" x=\"0\" y=\"459.6690424478148\" height=\"7.368319651157037\"></rect></g><g class=\"bar\" transform=\"translate(930,0)\"><rect width=\"13.5\" x=\"0\" y=\"460.1742463511076\" height=\"8.057040762749637\"></rect></g><g class=\"bar\" transform=\"translate(945,0)\"><rect width=\"13.5\" x=\"0\" y=\"457.68031373897963\" height=\"7.369266105309009\"></rect></g></g><g style=\"fill: #555566; \" class=\"layer\"><g class=\"bar\" transform=\"translate(0,0)\"><rect width=\"13.5\" x=\"0\" y=\"366.715676866161\" height=\"43.974660842352705\"></rect></g><g class=\"bar\" transform=\"translate(15,0)\"><rect width=\"13.5\" x=\"0\" y=\"358.5926513119492\" height=\"49.080700849161246\"></rect></g><g class=\"bar\" transform=\"translate(30,0)\"><rect width=\"13.5\" x=\"0\" y=\"361.90386050019134\" height=\"46.42767952640423\"></rect></g><g class=\"bar\" transform=\"translate(45,0)\"><rect width=\"13.5\" x=\"0\" y=\"345.5109781939297\" height=\"44.51529695419191\"></rect></g><g class=\"bar\" transform=\"translate(60,0)\"><rect width=\"13.5\" x=\"0\" y=\"294.3512563519164\" height=\"42.05609827551859\"></rect></g><g class=\"bar\" transform=\"translate(75,0)\"><rect width=\"13.5\" x=\"0\" y=\"192.0862768548434\" height=\"36.90453957382982\"></rect></g><g class=\"bar\" transform=\"translate(90,0)\"><rect width=\"13.5\" x=\"0\" y=\"50.39206906629846\" height=\"31.81715707826862\"></rect></g><g class=\"bar\" transform=\"translate(105,0)\"><rect width=\"13.5\" x=\"0\" y=\"0\" height=\"29.076525826349155\"></rect></g><g class=\"bar\" transform=\"translate(120,0)\"><rect width=\"13.5\" x=\"0\" y=\"85.6209238109418\" height=\"21.778425314975266\"></rect></g><g class=\"bar\" transform=\"translate(135,0)\"><rect width=\"13.5\" x=\"0\" y=\"221.26985703092902\" height=\"20.213667430297335\"></rect></g><g class=\"bar\" transform=\"translate(150,0)\"><rect width=\"13.5\" x=\"0\" y=\"292.3811126716865\" height=\"16.554851778099305\"></rect></g><g class=\"bar\" transform=\"translate(165,0)\"><rect width=\"13.5\" x=\"0\" y=\"290.71400145921706\" height=\"12.187505267179915\"></rect></g><g class=\"bar\" transform=\"translate(180,0)\"><rect width=\"13.5\" x=\"0\" y=\"276.4742439027765\" height=\"9.186790173972781\"></rect></g><g class=\"bar\" transform=\"translate(195,0)\"><rect width=\"13.5\" x=\"0\" y=\"293.14153573966956\" height=\"9.86297281614219\"></rect></g><g class=\"bar\" transform=\"translate(210,0)\"><rect width=\"13.5\" x=\"0\" y=\"340.68546626378986\" height=\"9.722701970459298\"></rect></g><g class=\"bar\" transform=\"translate(225,0)\"><rect width=\"13.5\" x=\"0\" y=\"372.0102399358464\" height=\"7.8236331346686825\"></rect></g><g class=\"bar\" transform=\"translate(240,0)\"><rect width=\"13.5\" x=\"0\" y=\"400.1607604651881\" height=\"7.109476460278643\"></rect></g><g class=\"bar\" transform=\"translate(255,0)\"><rect width=\"13.5\" x=\"0\" y=\"420.9981248608703\" height=\"4.627617920473938\"></rect></g><g class=\"bar\" transform=\"translate(270,0)\"><rect width=\"13.5\" x=\"0\" y=\"437.61426428356737\" height=\"5.245906658257297\"></rect></g><g class=\"bar\" transform=\"translate(285,0)\"><rect width=\"13.5\" x=\"0\" y=\"441.59759465184095\" height=\"8.663702208809127\"></rect></g><g class=\"bar\" transform=\"translate(300,0)\"><rect width=\"13.5\" x=\"0\" y=\"454.11841326794024\" height=\"6.544011036057782\"></rect></g><g class=\"bar\" transform=\"translate(315,0)\"><rect width=\"13.5\" x=\"0\" y=\"447.07445562932645\" height=\"8.161725233387017\"></rect></g><g class=\"bar\" transform=\"translate(330,0)\"><rect width=\"13.5\" x=\"0\" y=\"452.6260700210006\" height=\"4.7549455380174095\"></rect></g><g class=\"bar\" transform=\"translate(345,0)\"><rect width=\"13.5\" x=\"0\" y=\"357.64484038004895\" height=\"6.587543421432258\"></rect></g><g class=\"bar\" transform=\"translate(360,0)\"><rect width=\"13.5\" x=\"0\" y=\"309.1655525085881\" height=\"7.462417695278361\"></rect></g><g class=\"bar\" transform=\"translate(375,0)\"><rect width=\"13.5\" x=\"0\" y=\"437.8337533273139\" height=\"4.475923056412114\"></rect></g><g class=\"bar\" transform=\"translate(390,0)\"><rect width=\"13.5\" x=\"0\" y=\"451.3456158522675\" height=\"7.76628739159014\"></rect></g><g class=\"bar\" transform=\"translate(405,0)\"><rect width=\"13.5\" x=\"0\" y=\"450.51338194926643\" height=\"6.286741124506591\"></rect></g><g class=\"bar\" transform=\"translate(420,0)\"><rect width=\"13.5\" x=\"0\" y=\"446.0605003088923\" height=\"5.601608415857072\"></rect></g><g class=\"bar\" transform=\"translate(435,0)\"><rect width=\"13.5\" x=\"0\" y=\"433.18673025808437\" height=\"6.01273218912462\"></rect></g><g class=\"bar\" transform=\"translate(450,0)\"><rect width=\"13.5\" x=\"0\" y=\"426.01834014034205\" height=\"5.064315945898215\"></rect></g><g class=\"bar\" transform=\"translate(465,0)\"><rect width=\"13.5\" x=\"0\" y=\"412.9705447144833\" height=\"5.697028725911082\"></rect></g><g class=\"bar\" transform=\"translate(480,0)\"><rect width=\"13.5\" x=\"0\" y=\"408.00763917488644\" height=\"10.220415622086136\"></rect></g><g class=\"bar\" transform=\"translate(495,0)\"><rect width=\"13.5\" x=\"0\" y=\"372.939301427135\" height=\"55.50591333780915\"></rect></g><g class=\"bar\" transform=\"translate(510,0)\"><rect width=\"13.5\" x=\"0\" y=\"356.7021346705875\" height=\"79.22173973130094\"></rect></g><g class=\"bar\" transform=\"translate(525,0)\"><rect width=\"13.5\" x=\"0\" y=\"415.783856974032\" height=\"27.614377418663537\"></rect></g><g class=\"bar\" transform=\"translate(540,0)\"><rect width=\"13.5\" x=\"0\" y=\"436.23625393268026\" height=\"5.990612237103505\"></rect></g><g class=\"bar\" transform=\"translate(555,0)\"><rect width=\"13.5\" x=\"0\" y=\"428.9038846182371\" height=\"8.470460743004026\"></rect></g><g class=\"bar\" transform=\"translate(570,0)\"><rect width=\"13.5\" x=\"0\" y=\"423.92985457766224\" height=\"6.252574846213065\"></rect></g><g class=\"bar\" transform=\"translate(585,0)\"><rect width=\"13.5\" x=\"0\" y=\"420.9469181512712\" height=\"7.256669643048724\"></rect></g><g class=\"bar\" transform=\"translate(600,0)\"><rect width=\"13.5\" x=\"0\" y=\"413.9274208493742\" height=\"8.593568605756332\"></rect></g><g class=\"bar\" transform=\"translate(615,0)\"><rect width=\"13.5\" x=\"0\" y=\"410.9275947301884\" height=\"6.6790565488955735\"></rect></g><g class=\"bar\" transform=\"translate(630,0)\"><rect width=\"13.5\" x=\"0\" y=\"409.60529786279903\" height=\"5.603704706853023\"></rect></g><g class=\"bar\" transform=\"translate(645,0)\"><rect width=\"13.5\" x=\"0\" y=\"404.47976667978907\" height=\"8.513961821024054\"></rect></g><g class=\"bar\" transform=\"translate(660,0)\"><rect width=\"13.5\" x=\"0\" y=\"416.8559068509129\" height=\"5.278546203888595\"></rect></g><g class=\"bar\" transform=\"translate(675,0)\"><rect width=\"13.5\" x=\"0\" y=\"418.2556955519822\" height=\"6.854566778146932\"></rect></g><g class=\"bar\" transform=\"translate(690,0)\"><rect width=\"13.5\" x=\"0\" y=\"426.6481670311712\" height=\"7.822251029765027\"></rect></g><g class=\"bar\" transform=\"translate(705,0)\"><rect width=\"13.5\" x=\"0\" y=\"433.87476166176697\" height=\"6.554613341743789\"></rect></g><g class=\"bar\" transform=\"translate(720,0)\"><rect width=\"13.5\" x=\"0\" y=\"438.46599770147714\" height=\"7.903041301024928\"></rect></g><g class=\"bar\" transform=\"translate(735,0)\"><rect width=\"13.5\" x=\"0\" y=\"445.5581779552463\" height=\"6.2793207912481535\"></rect></g><g class=\"bar\" transform=\"translate(750,0)\"><rect width=\"13.5\" x=\"0\" y=\"447.34348026297897\" height=\"6.16295914135776\"></rect></g><g class=\"bar\" transform=\"translate(765,0)\"><rect width=\"13.5\" x=\"0\" y=\"452.35725591072156\" height=\"5.158620947352631\"></rect></g><g class=\"bar\" transform=\"translate(780,0)\"><rect width=\"13.5\" x=\"0\" y=\"455.24062674314365\" height=\"4.387177859396161\"></rect></g><g class=\"bar\" transform=\"translate(795,0)\"><rect width=\"13.5\" x=\"0\" y=\"454.9551449335842\" height=\"5.412511063578506\"></rect></g><g class=\"bar\" transform=\"translate(810,0)\"><rect width=\"13.5\" x=\"0\" y=\"455.1244541729661\" height=\"6.376083835415443\"></rect></g><g class=\"bar\" transform=\"translate(825,0)\"><rect width=\"13.5\" x=\"0\" y=\"454.5201589125223\" height=\"5.630524591462802\"></rect></g><g class=\"bar\" transform=\"translate(840,0)\"><rect width=\"13.5\" x=\"0\" y=\"453.7573944022943\" height=\"5.064349005428312\"></rect></g><g class=\"bar\" transform=\"translate(855,0)\"><rect width=\"13.5\" x=\"0\" y=\"453.4566328767819\" height=\"7.074855616392426\"></rect></g><g class=\"bar\" transform=\"translate(870,0)\"><rect width=\"13.5\" x=\"0\" y=\"455.8701993547718\" height=\"5.829597826916483\"></rect></g><g class=\"bar\" transform=\"translate(885,0)\"><rect width=\"13.5\" x=\"0\" y=\"452.23494771506176\" height=\"7.917578021644147\"></rect></g><g class=\"bar\" transform=\"translate(900,0)\"><rect width=\"13.5\" x=\"0\" y=\"447.9186177511623\" height=\"6.757170635931345\"></rect></g><g class=\"bar\" transform=\"translate(915,0)\"><rect width=\"13.5\" x=\"0\" y=\"453.38461527933555\" height=\"6.284427168479226\"></rect></g><g class=\"bar\" transform=\"translate(930,0)\"><rect width=\"13.5\" x=\"0\" y=\"451.9850259608904\" height=\"8.189220390217201\"></rect></g><g class=\"bar\" transform=\"translate(945,0)\"><rect width=\"13.5\" x=\"0\" y=\"451.6325746992705\" height=\"6.047739039709143\"></rect></g></g><text class=\"label\" x=\"0\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">0</text><text class=\"label\" x=\"15\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">1</text><text class=\"label\" x=\"30\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">2</text><text class=\"label\" x=\"45\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">3</text><text class=\"label\" x=\"60\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">4</text><text class=\"label\" x=\"75\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">5</text><text class=\"label\" x=\"90\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">6</text><text class=\"label\" x=\"105\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">7</text><text class=\"label\" x=\"120\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">8</text><text class=\"label\" x=\"135\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">9</text><text class=\"label\" x=\"150\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">10</text><text class=\"label\" x=\"165\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">11</text><text class=\"label\" x=\"180\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">12</text><text class=\"label\" x=\"195\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">13</text><text class=\"label\" x=\"210\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">14</text><text class=\"label\" x=\"225\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">15</text><text class=\"label\" x=\"240\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">16</text><text class=\"label\" x=\"255\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">17</text><text class=\"label\" x=\"270\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">18</text><text class=\"label\" x=\"285\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">19</text><text class=\"label\" x=\"300\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">20</text><text class=\"label\" x=\"315\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">21</text><text class=\"label\" x=\"330\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">22</text><text class=\"label\" x=\"345\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">23</text><text class=\"label\" x=\"360\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">24</text><text class=\"label\" x=\"375\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">25</text><text class=\"label\" x=\"390\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">26</text><text class=\"label\" x=\"405\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">27</text><text class=\"label\" x=\"420\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">28</text><text class=\"label\" x=\"435\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">29</text><text class=\"label\" x=\"450\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">30</text><text class=\"label\" x=\"465\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">31</text><text class=\"label\" x=\"480\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">32</text><text class=\"label\" x=\"495\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">33</text><text class=\"label\" x=\"510\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">34</text><text class=\"label\" x=\"525\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">35</text><text class=\"label\" x=\"540\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">36</text><text class=\"label\" x=\"555\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">37</text><text class=\"label\" x=\"570\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">38</text><text class=\"label\" x=\"585\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">39</text><text class=\"label\" x=\"600\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">40</text><text class=\"label\" x=\"615\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">41</text><text class=\"label\" x=\"630\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">42</text><text class=\"label\" x=\"645\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">43</text><text class=\"label\" x=\"660\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">44</text><text class=\"label\" x=\"675\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">45</text><text class=\"label\" x=\"690\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">46</text><text class=\"label\" x=\"705\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">47</text><text class=\"label\" x=\"720\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">48</text><text class=\"label\" x=\"735\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">49</text><text class=\"label\" x=\"750\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">50</text><text class=\"label\" x=\"765\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">51</text><text class=\"label\" x=\"780\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">52</text><text class=\"label\" x=\"795\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">53</text><text class=\"label\" x=\"810\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">54</text><text class=\"label\" x=\"825\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">55</text><text class=\"label\" x=\"840\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">56</text><text class=\"label\" x=\"855\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">57</text><text class=\"label\" x=\"870\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">58</text><text class=\"label\" x=\"885\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">59</text><text class=\"label\" x=\"900\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">60</text><text class=\"label\" x=\"915\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">61</text><text class=\"label\" x=\"930\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">62</text><text class=\"label\" x=\"945\" y=\"485.5\" dx=\"6.75\" dy=\".71em\" text-anchor=\"middle\">63</text><line x1=\"0\" x2=\"958.5\" y1=\"479.5\" y2=\"479.5\"></line></svg>";
        String imageType = request.getParameter("image_type");

        if(imageType == null){
           imageType = "png";
        }

        if(svg == null || svg.isEmpty()){
           throw new IllegalArgumentException("svg parameter not set") ;
        }

        InputStream inputStream = new ByteArrayInputStream(svg.getBytes());
        OutputStream outputStream = response.getOutputStream();

        Document doc = getDocument(inputStream);

        TranscoderInput input = new TranscoderInput(doc);
        TranscoderOutput output = new TranscoderOutput(outputStream);

        try {
            Transcoder transcoder = getTranscoder(imageType, IMAGE_QUALITY);
            transcoder.transcode(input, output);
        } catch (TranscoderException e) {
            Log.error("Error in Batik Transcoding:\n"+svg,e);
        }

        Log.debug("Svg: "+svg);
        Log.debug("Transcoded to : "+ imageType + " in "+(System.currentTimeMillis() - startTime) +" ms.");
        response.setContentType("image/" + imageType);
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException,
        IOException {
        doGet(request, response);
    }

    private Document getDocument(InputStream inputStream) throws IOException {
        String parser = XMLResourceDescriptor.getXMLParserClassName();
        SAXSVGDocumentFactory f = new SAXSVGDocumentFactory(parser);
        Document doc = f.createDocument("http://www.w3.org/2000/svg", inputStream);
        return doc;
    }

    private Transcoder getTranscoder(String transcoderType, float keyQuality) {
        Transcoder transcoder = null;
        if (transcoderType.equals("jpg")) {
            transcoder = getJPEGTranscoder(keyQuality);
        } else if (transcoderType.equals("png")) {
            transcoder = getPNGTranscoder();
        }else {
           Log.error("Image type is unknown: "+ transcoderType);
           throw new UnsupportedOperationException("Unknown Image type: "+transcoderType);
        }
        // add any external stylesheets that are needed for rendering
        // @todo: put stylesheet url in properties or get rid of it
        transcoder.addTranscodingHint(ImageTranscoder.KEY_USER_STYLESHEET_URI, "http://localhost:7080/coregui/css/nv.d3.css");
        return transcoder;
    }

    private JPEGTranscoder getJPEGTranscoder(float imageQuality) {
        JPEGTranscoder jpeg = new JPEGTranscoder();
        jpeg.addTranscodingHint(JPEGTranscoder.KEY_QUALITY, new Float(imageQuality));
        return jpeg;
    }

    private PNGTranscoder getPNGTranscoder() {
        return new PNGTranscoder();
    }

}
